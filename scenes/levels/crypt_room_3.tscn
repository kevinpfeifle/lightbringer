[gd_scene load_steps=21 format=3 uid="uid://crq2tsy1j8k0n"]

[ext_resource type="Script" path="res://scripts/rooms/room.gd" id="1_a7x0q"]
[ext_resource type="PackedScene" uid="uid://cbwhookl07xna" path="res://scenes/gui/player_hud.tscn" id="2_7cndi"]
[ext_resource type="PackedScene" uid="uid://cjivumpq18kx0" path="res://scenes/scene_transition.tscn" id="3_cn2d7"]
[ext_resource type="PackedScene" uid="uid://bqcslwnrixfs1" path="res://scenes/backgrounds/crypt_parallax_bg.tscn" id="4_wibwa"]
[ext_resource type="PackedScene" uid="uid://1h5776gfjkdp" path="res://scenes/enemies/lightbug.tscn" id="5_yupd6"]
[ext_resource type="PackedScene" uid="uid://cel4uexo56tsx" path="res://scenes/objects/beacon.tscn" id="6_it877"]
[ext_resource type="PackedScene" uid="uid://ba4etpqmlilx3" path="res://scenes/player/camera.tscn" id="7_xxws8"]
[ext_resource type="Texture2D" uid="uid://egrc4lsppf3" path="res://assets/rooms/crypt/room3/foreground_primary.png" id="8_ypb48"]
[ext_resource type="PackedScene" uid="uid://gfsb4pp356dp" path="res://scenes/enemies/orbi.tscn" id="9_ex4pu"]
[ext_resource type="PackedScene" uid="uid://crqgq0wfyveif" path="res://scenes/enemies/sludge.tscn" id="10_ntahf"]
[ext_resource type="Texture2D" uid="uid://bo6fpdn24oa7r" path="res://assets/decor/dead_lightbringers.png" id="11_fnq83"]
[ext_resource type="PackedScene" uid="uid://cthib17r5bq25" path="res://scenes/objects/platforms/medium_platform.tscn" id="11_sexoq"]
[ext_resource type="PackedScene" uid="uid://c1klfyukjyhji" path="res://scenes/objects/platforms/big_platform.tscn" id="11_x7nds"]
[ext_resource type="PackedScene" uid="uid://da4dfyictmv8d" path="res://scenes/objects/platforms/small_platform.tscn" id="12_5auvv"]
[ext_resource type="Texture2D" uid="uid://cwx1mf4t26dk3" path="res://assets/decor/deadbringer.png" id="12_8swlm"]
[ext_resource type="PackedScene" uid="uid://cmxihuphbrhum" path="res://scenes/level-design/ambient_light.tscn" id="12_ewtfr"]
[ext_resource type="PackedScene" uid="uid://dy5h3m223es3h" path="res://scenes/objects/lantern.tscn" id="14_ojynn"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_uuu7b"]
vertices = PackedVector2Array(2011.75, 754.93, 3974.01, 859.93, 3972.22, 1101.92, 3819.91, 1120.2, 3115.17, 1089.05, 3088.06, 1080.86, 1439.22, 1551.25, 1444.75, 1437.93, 1536.26, 1390, 1659.26, 1425.74, 1728.82, 1460.17, 1737.19, 1466.73, 3457.22, 1627.25, 3462.75, 1513.93, 4069, 1475, 4158.03, 1541.77, 4193.13, 1582.1, 4188.96, 1645.45, 4116.96, 368.008, 4121.54, 539.68, 4054.49, 594.063, 2388.75, 454.93, 447.109, 38.0234, 3827.24, 1232, 3887.13, 1270.11, 3890.34, 1279.01, 3336.65, 1280.06, 3105.2, 1254.31, 3986.82, 744.672, 2383.22, 568.25, 1449.64, 1300.01, 846.648, 1439.06, 1839.45, 567, 1849.77, 593.563, 1850.9, 600.297, 1334.8, 694.5, 1339.79, 609.672, 1353.08, 597.07, 1798.74, 567, 2329.14, 596.391, 2225.95, 635.906, 1782.26, 562.289, 1798.15, 563.023, 1346.04, 544.898, 1421.74, 867, 1472.77, 893.563, 1473.9, 900.297, 1439.4, 1086.97, 1390.85, 1194.68, 1101.22, 1276.25, 1106.75, 1162.93, 1405.26, 862.289, 4192.76, 1756.47, 3033.07, 1740, 3147.67, 1727.63, 4140.51, 43.9375, 4137.06, 126.797, 1790.65, 456.063, 3328.26, 1386.29, 2984.51, 1388.54, 1047.14, 1304.39, 1344.92, 508.539, 304.867, 232.133, 392.148, 108.813, 898.844, 514.547, 321.102, 518.141, 276.008, 377.453, 229.891, 531.477, 284.469, 592.977, 223.008, 876.477, 286.477, 624.008, 281.617, 666.602, 295.867, 669.641, 332.047, 738.703, 3700.78, 1483.63, 4069, 1474.99, 3619.67, 1492.63, 2333.83, 565.023, 1952.14, 896.391, 1956.83, 865.023, 2006.22, 868.25, 1051.83, 1273.02, 965.523, 1324.59, 966.25, 1324.27, 943.953, 1343.91, 872.781, 1367.63, 823.813, 1370.81, 791.672, 1376.63, 1385.14, 1579.39, 1389.83, 1548.02, 3403.14, 1655.39, 3407.83, 1624.02, 3875.14, 1420.39, 3879.83, 1389.02, 3913.09, 1391.19, 3914.45, 1406.92, 391.273, 828.242, 397.883, 828, 398.742, 832.523, 237.883, 1216.55, 1421.15, 863.023, 500.258, 1270.29, 516.148, 1271.02, 516.742, 1275, 838.258, 1545.29, 854.148, 1546.02, 854.742, 1550, 631.07, 1785.79, 3344.15, 1387.02, 3344.74, 1391, 2640.65, 1524, 2856.26, 1621.29, 2872.15, 1622.02, 2872.74, 1626, 3089.86, 1089.01, 1787.31, 1087.39, 1870.52, 916.594, 1871.25, 916.273, 1848.95, 935.906, 1777.78, 959.633, 1728.81, 962.813, 1696.67, 968.633, 1609.52, 951.203, 1598.19, 944.68, 1594.53, 943.883, 1522.27, 904.891, 1530.74, 905.898, 1570.39, 928.703, 1462.45, 867, 557.453, 1275, 567.773, 1301.56, 568.898, 1308.3, 895.453, 1550, 905.773, 1576.56, 906.898, 1583.3, 3385.45, 1391, 3395.77, 1417.56, 3396.9, 1424.3, 2913.45, 1626, 2923.77, 1652.56, 2924.9, 1659.3, 383.656, 752.93, 389.719, 784.953, 513.156, 838.477, 568.398, 872.898, 577.453, 881.953, 641.078, 926.258, 262.648, 1378.04, 674.32, 935.023, 695.711, 947.523, 1240.42, 788.75, 1245.4, 748.922, 1276.03, 733.617, 1237.81, 839.023, 1331.07, 699.742, 1331.41, 696.328, 1899.27, 604.891, 1907.74, 605.898, 1947.39, 628.703, 1971.53, 643.883, 1413.65, 756.063, 491.383, 1731.08, 343.742, 1706.32, 293.859, 1613.1, 727.891, 949.148, 740.25, 952.422, 508.648, 1164.06, 704.523, 1359.2, 1030.87, 903.492, 949.18, 937.25, 1806.97, 1501.62, 1055.79, 883.797, 1167.46, 829.75, 1216.2, 834.281, 3996.79, 1421.06, 3793.52, 1440.59, 3794.25, 1440.27, 3771.95, 1459.91, 693.188, 1352.68, 689.531, 1351.88, 617.273, 1312.89, 625.742, 1313.9, 665.391, 1336.7, 955.273, 1587.89, 963.742, 1588.9, 1003.39, 1611.7, 1027.53, 1626.88, 3445.27, 1428.89, 3453.74, 1429.9, 3493.39, 1452.7, 3517.53, 1467.88, 2973.27, 1663.89, 2981.74, 1664.9, 3021.39, 1687.7, 3045.53, 1702.88, 1303.52, 1599.59, 1304.25, 1599.27, 1815.56, 1503.09, 1857.81, 1524, 1600.26, 1755.01, 1281.95, 1618.91, 2247.52, 616.594, 2248.25, 616.273, 2154.78, 659.633, 2105.81, 662.813, 2073.67, 668.633, 1986.52, 651.203, 1975.19, 644.68, 841.273, 965.594, 1031.19, 1627.68, 1042.52, 1634.2, 1129.67, 1651.63, 1161.81, 1645.81, 1210.78, 1642.63, 3299.95, 1694.91, 3321.52, 1675.59, 3322.25, 1675.27, 3521.19, 1468.68, 3532.52, 1475.2, 2864.65, 1515.06, 3049.19, 1703.68, 3060.52, 1710.2, 3228.78, 1718.63, 3651.81, 1486.81, 3179.81, 1721.81)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5), PackedInt32Array(6, 7, 8, 9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17), PackedInt32Array(18, 19, 20, 21, 22), PackedInt32Array(23, 24, 25, 26, 27), PackedInt32Array(21, 20, 28, 29), PackedInt32Array(30, 8, 7, 31), PackedInt32Array(32, 33, 34, 35, 36, 37, 38), PackedInt32Array(39, 28, 1, 0, 40), PackedInt32Array(41, 42, 38, 37, 43), PackedInt32Array(44, 45, 46, 47, 48, 49, 50, 51), PackedInt32Array(17, 52, 53, 54), PackedInt32Array(22, 55, 56, 18), PackedInt32Array(22, 21, 57), PackedInt32Array(27, 4, 3, 23), PackedInt32Array(27, 26, 58, 59), PackedInt32Array(49, 48, 30, 31, 60), PackedInt32Array(57, 41, 43, 61), PackedInt32Array(62, 63, 22, 57, 61, 64, 65, 66), PackedInt32Array(67, 66, 65, 68), PackedInt32Array(69, 67, 68, 70, 71), PackedInt32Array(69, 71, 72, 73), PackedInt32Array(74, 75, 14, 13, 76), PackedInt32Array(39, 77, 29, 28), PackedInt32Array(78, 79, 80), PackedInt32Array(60, 81, 49), PackedInt32Array(82, 83, 60, 31, 84), PackedInt32Array(85, 84, 31), PackedInt32Array(86, 85, 31, 87), PackedInt32Array(88, 89, 6), PackedInt32Array(90, 91, 12), PackedInt32Array(92, 93, 94, 95), PackedInt32Array(96, 97, 98, 99, 69), PackedInt32Array(51, 100, 44), PackedInt32Array(101, 102, 103), PackedInt32Array(104, 105, 106, 107), PackedInt32Array(58, 108, 109, 110, 59), PackedInt32Array(111, 112, 113), PackedInt32Array(4, 114, 5), PackedInt32Array(80, 0, 5), PackedInt32Array(80, 5, 115, 78), PackedInt32Array(116, 117, 78, 115, 118), PackedInt32Array(119, 118, 115, 47), PackedInt32Array(120, 119, 47, 121), PackedInt32Array(122, 121, 47), PackedInt32Array(123, 122, 47, 124), PackedInt32Array(125, 126, 127, 124, 47, 46), PackedInt32Array(44, 128, 45), PackedInt32Array(103, 129, 130, 131, 107), PackedInt32Array(106, 132, 133, 134, 107), PackedInt32Array(109, 135, 136, 137, 110), PackedInt32Array(113, 138, 139, 140), PackedInt32Array(69, 73, 141, 142, 96), PackedInt32Array(99, 98, 143, 144, 145), PackedInt32Array(99, 145, 146, 147), PackedInt32Array(147, 146, 148, 149), PackedInt32Array(150, 151, 152, 153), PackedInt32Array(154, 155, 35, 34, 156, 157, 158, 159, 160), PackedInt32Array(161, 162, 163, 147), PackedInt32Array(147, 149, 164, 165, 166), PackedInt32Array(87, 31, 104, 167), PackedInt32Array(168, 153, 51, 50, 166, 169), PackedInt32Array(6, 11, 170, 88), PackedInt32Array(107, 161, 147, 101, 103), PackedInt32Array(171, 172, 173, 153, 168), PackedInt32Array(153, 152, 154, 160, 51), PackedInt32Array(90, 12, 17), PackedInt32Array(92, 95, 174, 75), PackedInt32Array(175, 176, 92, 75, 177), PackedInt32Array(178, 167, 104, 179), PackedInt32Array(131, 180, 181, 182, 179, 104, 107), PackedInt32Array(107, 134, 183, 184, 185, 186), PackedInt32Array(110, 137, 187, 188, 189, 190), PackedInt32Array(140, 191, 192, 193, 194, 53), PackedInt32Array(74, 177, 75), PackedInt32Array(195, 196, 88, 170, 197, 198, 199, 200), PackedInt32Array(40, 201, 202, 39), PackedInt32Array(203, 40, 0), PackedInt32Array(204, 203, 0, 205), PackedInt32Array(206, 205, 0, 160), PackedInt32Array(207, 206, 160, 159), PackedInt32Array(208, 169, 166), PackedInt32Array(165, 208, 166), PackedInt32Array(147, 166, 101), PackedInt32Array(107, 186, 209, 210), PackedInt32Array(199, 107, 210, 211), PackedInt32Array(199, 211, 212, 213), PackedInt32Array(199, 213, 200), PackedInt32Array(53, 199, 198, 110, 111, 140), PackedInt32Array(214, 215, 216, 90, 17), PackedInt32Array(110, 190, 217, 218, 219), PackedInt32Array(194, 220, 221, 53), PackedInt32Array(111, 113, 140), PackedInt32Array(222, 214, 17), PackedInt32Array(76, 223, 74), PackedInt32Array(218, 76, 13, 219), PackedInt32Array(110, 219, 111), PackedInt32Array(53, 221, 54), PackedInt32Array(222, 17, 54), PackedInt32Array(222, 54, 224)])
outlines = Array[PackedVector2Array]([PackedVector2Array(430, 3, 4177, 9, 4172, 129, 4152, 369, 4157, 556, 4083, 616, 4021, 754, 4009, 862, 4007, 1133, 3857, 1151, 3861, 1212, 3916, 1247, 3942, 1319, 3947, 1377, 4011, 1388, 4090, 1447, 4182, 1516, 4229, 1570, 4224, 1646, 4229, 1792, 3033, 1775, 1601, 1790, 625, 1821, 482, 1765, 321, 1738, 260, 1624, 228, 1383, 203, 1220, 188, 877, 195, 526, 242, 369, 272, 218, 364, 88)])
parsed_collision_mask = 3
cell_size = 16.0
agent_radius = 35.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xlwhm"]
size = Vector2(136.75, 349)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yfd7t"]
size = Vector2(70, 279)

[node name="CryptRoom3" type="Node2D" node_paths=PackedStringArray("camera", "default_spawn_location", "player_hud", "scene_transition", "doors", "spawn_points")]
script = ExtResource("1_a7x0q")
camera = NodePath("Camera")
default_spawn_location = NodePath("Doors/Right/WicKEnterPoint")
player_hud = NodePath("CanvasLayer/PlayerHud")
scene_path = "res://scenes/levels/crypt_room_3.tscn"
scene_transition = NodePath("CanvasLayer2/SceneTransition")
adjacent_rooms = Array[String](["res://scenes/levels/crypt_room_2.tscn", "res://scenes/levels/crypt_room_4.tscn"])
doors = [NodePath("Doors/Left"), NodePath("Doors/Right")]
door_sides = Array[int]([0, 1])
spawn_points = [NodePath("Doors/Left/WickEnterPointLeft"), NodePath("Doors/Right/WicKEnterPoint")]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PlayerHud" parent="CanvasLayer" instance=ExtResource("2_7cndi")]

[node name="CanvasLayer2" type="CanvasLayer" parent="."]

[node name="SceneTransition" parent="CanvasLayer2" instance=ExtResource("3_cn2d7")]
visible = false
offset_right = 1920.0
offset_bottom = 1080.0

[node name="GloomyBridgeParallaxBG" parent="." instance=ExtResource("4_wibwa")]

[node name="Camera" parent="." instance=ExtResource("7_xxws8")]
position = Vector2(415, 1690)
zoom = Vector2(0.8, 0.8)
limit_left = 10
limit_top = 0
limit_right = 4320
limit_bottom = 1920
limit_smoothed = true

[node name="Walls+Floor" type="StaticBody2D" parent="."]
light_mask = 17

[node name="Sprite2D" type="Sprite2D" parent="Walls+Floor"]
position = Vector2(2166, 964)
texture = ExtResource("8_ypb48")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Walls+Floor"]
polygon = PackedVector2Array(4258, 1801, 4262, 1767, 4269, 1722, 4277, 1667, 4277, 1667, 4243, 1649, 4254, 1618, 4252, 1578, 4244, 1544, 4146, 1425, 4096, 1372, 4019, 1335, 3981, 1334, 3981, 1350, 3969, 1366, 3956, 1356, 3967, 1317, 3972, 1243, 3948, 1192, 3871, 1190, 3869, 1159, 3949, 1143, 4043, 1141, 4328, 1138, 4325, 1798)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Walls+Floor"]
polygon = PackedVector2Array(4200, 1136, 4327, 1137, 4331, 1, 4182, -1, 4197, 77, 4194, 165, 4185, 206, 4189, 311, 4172, 347, 4186, 504, 4180, 584, 4102, 609, 4083, 661, 4062, 724, 4061, 783, 4093, 797, 4142, 790, 4171, 811, 4199, 853, 4199, 881, 4197, 955, 4197, 1029)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="Walls+Floor"]
polygon = PackedVector2Array(4326, 1802, 4079, 1804, 3963, 1811, 3963, 1811, 3757, 1808, 3667, 1812, 3510, 1811, 3390, 1805, 3278, 1809, 3163, 1804, 3049, 1799, 2981, 1784, 2828, 1787, 2519, 1797, 2381, 1805, 2217, 1803, 2102, 1807, 2033, 1803, 1930, 1805, 1845, 1804, 1626, 1812, 1504, 1813, 1408, 1827, 1270, 1832, 1116, 1839, 948, 1848, 845, 1846, 696, 1845, 512, 1836, 526, 1789, 335, 1782, 311, 1776, 301, 1748, 262, 1742, 278, 1711, 110, 1713, 4, 1712, 8, 1925, 4327, 1922)

[node name="CollisionPolygon2D4" type="CollisionPolygon2D" parent="Walls+Floor"]
polygon = PackedVector2Array(4, 1712, -2, 1, 427, -3, 368, 43, 269, 152, 213, 251, 217, 362, 156, 391, 158, 1308, 169, 1343, 184, 1396, 193, 1434, 161, 1425, 133, 1472, 118, 1545, 122, 1645, 123, 1710)

[node name="Enemies" type="Node" parent="."]

[node name="Orbi" parent="Enemies" instance=ExtResource("9_ex4pu")]
position = Vector2(3800, 584)
enemy_id = 1

[node name="Orbi2" parent="Enemies" instance=ExtResource("9_ex4pu")]
position = Vector2(2577, 696)
enemy_id = 2

[node name="Orbi3" parent="Enemies" instance=ExtResource("9_ex4pu")]
position = Vector2(988, 298)
enemy_id = 13

[node name="Sludge" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(2956, 1527)
enemy_id = 3

[node name="Sludge5" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(3819, 1287)
starting_direction = 0
enemy_id = 11

[node name="Sludge6" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(599, 1175)
enemy_id = 12

[node name="Sludge2" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(1562, 1775)
enemy_id = 4

[node name="Sludge3" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(2949, 1081)
starting_direction = 0
enemy_id = 5

[node name="Sludge4" parent="Enemies" instance=ExtResource("10_ntahf")]
position = Vector2(1566, 1093)
enemy_id = 10

[node name="Lightbug2" parent="Enemies" instance=ExtResource("5_yupd6")]
position = Vector2(4153, 1654)
enemy_id = 6

[node name="Lightbug" parent="Enemies" instance=ExtResource("5_yupd6")]
position = Vector2(623, 314)
enemy_id = 7

[node name="Lightbug3" parent="Enemies" instance=ExtResource("5_yupd6")]
position = Vector2(437, 443)
enemy_id = 9

[node name="Lightbug4" parent="Enemies" instance=ExtResource("5_yupd6")]
position = Vector2(619, 454)
enemy_id = 8

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_uuu7b")

[node name="BigPlatform" parent="NavigationRegion2D" instance=ExtResource("11_x7nds")]
position = Vector2(2257, 1297)

[node name="MediumPlatform" parent="NavigationRegion2D" instance=ExtResource("11_sexoq")]
position = Vector2(814, 733)

[node name="SmallPlatform" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
position = Vector2(3161, 1619)

[node name="SmallPlatform2" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
position = Vector2(3633, 1384)

[node name="SmallPlatform3" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
z_index = 1
position = Vector2(1143, 1543)

[node name="SmallPlatform4" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
position = Vector2(805, 1268)

[node name="SmallPlatform5" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
position = Vector2(1710, 860)

[node name="SmallPlatform6" parent="NavigationRegion2D" instance=ExtResource("12_5auvv")]
position = Vector2(2087, 560)

[node name="Decor" type="Node" parent="."]

[node name="DeadLightbringers" type="Sprite2D" parent="Decor"]
position = Vector2(1128, 1679)
texture = ExtResource("11_fnq83")

[node name="Sprite2D" type="Sprite2D" parent="Decor"]
position = Vector2(4182, 1743)
texture = ExtResource("12_8swlm")

[node name="Sprite2D2" type="Sprite2D" parent="Decor"]
position = Vector2(461, 495)
texture = ExtResource("12_8swlm")

[node name="Sprite2D3" type="Sprite2D" parent="Decor"]
position = Vector2(591, 506)
scale = Vector2(-1, 1)
texture = ExtResource("12_8swlm")

[node name="AmbientLight" parent="." instance=ExtResource("12_ewtfr")]

[node name="Lantern" parent="." instance=ExtResource("14_ojynn")]
position = Vector2(820, 483)

[node name="Lantern2" parent="." instance=ExtResource("14_ojynn")]
position = Vector2(3588, 1750)

[node name="Doors" type="Node" parent="."]

[node name="Right" type="Area2D" parent="Doors"]
position = Vector2(4222, 1049)
collision_layer = 64
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Doors/Right"]
position = Vector2(-85.625, -78.5)
shape = SubResource("RectangleShape2D_xlwhm")

[node name="WicKEnterPoint" type="Marker2D" parent="Doors/Right"]
position = Vector2(-230, 11)

[node name="Left" type="Area2D" parent="Doors"]
position = Vector2(193, 1622)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Doors/Left"]
position = Vector2(-34, -48.5)
shape = SubResource("RectangleShape2D_yfd7t")

[node name="WickEnterPointLeft" type="Marker2D" parent="Doors/Left"]
position = Vector2(50, 17)

[node name="Beacon" parent="." instance=ExtResource("6_it877")]
position = Vector2(2241, 980)
