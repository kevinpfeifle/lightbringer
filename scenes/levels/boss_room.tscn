[gd_scene load_steps=19 format=3 uid="uid://cljls761cs87n"]

[ext_resource type="Script" path="res://scripts/rooms/room.gd" id="1_abn8t"]
[ext_resource type="Texture2D" uid="uid://l5u6rnnt4a5p" path="res://assets/backgrounds/boss_background.png" id="1_cv0fk"]
[ext_resource type="PackedScene" uid="uid://cbwhookl07xna" path="res://scenes/gui/player_hud.tscn" id="1_jaeu5"]
[ext_resource type="Texture2D" uid="uid://b3l5okygh8knd" path="res://assets/rooms/crypt/boss_room/fog.png" id="2_0suvt"]
[ext_resource type="PackedScene" uid="uid://cjivumpq18kx0" path="res://scenes/scene_transition.tscn" id="2_ckvva"]
[ext_resource type="PackedScene" uid="uid://cmxihuphbrhum" path="res://scenes/level-design/ambient_light.tscn" id="3_fgr18"]
[ext_resource type="PackedScene" uid="uid://cop2p75yhi7w" path="res://scenes/enemies/light_harvester.tscn" id="4_3feig"]
[ext_resource type="PackedScene" uid="uid://ba4etpqmlilx3" path="res://scenes/player/camera.tscn" id="4_apome"]
[ext_resource type="Texture2D" uid="uid://cew87huhtne3g" path="res://assets/rooms/crypt/boss_room/walls.png" id="5_6fo6o"]
[ext_resource type="Texture2D" uid="uid://dvtmqot32235j" path="res://assets/rooms/crypt/boss_room/floor.png" id="6_37c4f"]
[ext_resource type="PackedScene" uid="uid://1h5776gfjkdp" path="res://scenes/enemies/lightbug.tscn" id="11_b5qjx"]
[ext_resource type="PackedScene" uid="uid://dy5h3m223es3h" path="res://scenes/objects/lantern.tscn" id="11_m1y6d"]
[ext_resource type="PackedScene" uid="uid://ds0b66wwuefd3" path="res://scenes/objects/platforms/stone_platform.tscn" id="13_75py6"]
[ext_resource type="PackedScene" uid="uid://da4dfyictmv8d" path="res://scenes/objects/platforms/small_platform.tscn" id="14_4tvg5"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xieh3"]
size = Vector2(5401, 378)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ol7g7"]
size = Vector2(305, 131.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lt10v"]
size = Vector2(306, 447)

[sub_resource type="NavigationPolygon" id="NavigationPolygon_d8dyn"]
vertices = PackedVector2Array(841.148, -1087.79, 1193.09, -966.898, 1340.69, -364.031, 1331.45, -254.461, 1234, 155.961, 665.508, 157.031, -731, 155.961, 684.547, -1031.38, 1946, 499.961, 1377.51, 501.031, -1428, 499.961, 934.813, 339.359, 603.547, 922, 282.992, 766.281, 287, 683.961, 1564.87, 666.969, 1646.81, 683.359, 1673.61, 922, 1553.65, 660.523, 1550.3, 659.789, 1473.81, 619.969, 1485.56, 621.367, 1528.26, 645.922, 1436.8, 616.461, 1583.25, -224.07, 1939.33, -204.281, 2194.9, -63.2422, 2190, 582.063, 1229.99, 238.281, 1676.05, 1070.17, 2202.03, 1444.01, 1667.32, 1128.76, 1941.99, 582.281, 1672.51, 958.242, 1888.79, 614.219, 2217.87, 1528.01, -2196.06, 1529.99, -1990.19, 1449.36, -1959.99, 1443.89, -1912.13, 1440.79, 1479.47, -777.633, 1637.53, -657.969, 1436.65, 615.563, 1435.72, 615.461, 1422.71, 582, 1384.71, 582, 1371.44, 578.023, -281.492, 685.031, -1432.01, 582.281, 659.438, 234.023, -735.008, 238.281, 1384.21, 578.609, -2189.38, 1383.48, -2163.18, 1385.97, -2151.42, 1387.37, -2108.72, 1411.92, -2086.69, 1425.79, 607.008, 1077.75, -614.953, 1063.17, -618.469, 951.227, -617.398, 915, -12.1875, 867.359, -287.563, 762.023, -1485.21, 614.219, -1479.94, 579.148, 608.133, 1098.97, -623.68, 1121.76, 1176.79, 270.219, 1182.04, 235.148, 229.789, 798.219, 235.039, 763.148, 1894.04, 579.148, 1812.3, 633.813, 1816.43, 632.008, 1791.25, 652.656, 1724.87, 674.789, 1677, 677.891, -788.211, 270.219, -782.938, 235.148, -1748.21, 1380.22, -1742.94, 1345.15, -1695.01, 1348.28, -1305.56, 234.023, -1292.78, 234.609, -1292.29, 238, -2002.56, 578.023, -1989.78, 578.609, -1989.29, 582, -274.781, 762.609, -274.289, 766, -860.531, 288, 672.211, 234.609, 672.711, 238, -885.75, 308.656, -864.688, 289.82, 611.656, 1113.16, 612.656, 1134.82, -665.258, 1144.56, -1241.28, 271.461, -1240.34, 271.563, -1240.2, 272.461, -1938.28, 615.461, -1937.34, 615.563, -1937.2, 616.461, -2184.04, 1266.89, -223.281, 799.461, -222.344, 799.563, -222.203, 800.461, -1649.13, 674.789, 723.719, 271.461, 724.648, 271.563, 724.797, 272.461, 330.578, -992.172, -1335.7, -365.172, -1558.69, -521.969, -1628.9, -693.906, -1378.58, -899.672, -1004.35, -1055.84, -607.93, -1041.09, -471.07, -1004.86, -1254.29, 238, 710.711, 238, -1951.29, 582, -236.289, 766, -294.344, -1014.35, 30.0625, -1481.39, 270.797, -1392.7, 367.781, -1341.1, 365.023, -1183.91, 1625.74, 1151.57, -340.75, -1188.72, -324.117, -1367.99, -157.789, -1449.76, -2083.32, 1426.52, -2072.14, 1432.97, -1339.58, -231.656, -1299.49, 157.031, -2121.58, -101.758, -1811.92, -239.922, -1996.49, 501.031, -1845.75, 1418.66, -1824.69, 1399.82, -1820.53, 1398, 1273.43, 1227.02, -1691, 1265.96, 1100.12, 1224.99, 1615.77, 1154.52, 1609.28, 1158.85, 1519.9, 1193.55, 153.297, 817.813, 157.43, 816.008, 132.25, 836.656, 1100.3, 289.813, 1104.43, 288.008, 1079.25, 308.656, 1012.87, 330.789, 65.8672, 858.789, 1501.55, 1195.77, 1468.94, 1204.15, 761.813, 275.969, 773.563, 277.367, 816.258, 301.922, 838.297, 315.789, -952.133, 330.789, -1203.18, 275.969, -1191.42, 277.367, -1148.72, 301.922, -1126.69, 315.789, -1900.18, 619.969, -1888.42, 621.367, -1845.72, 645.922, -1823.69, 659.789, -185.18, 803.969, -173.422, 805.367, -130.719, 829.922, -108.688, 843.789, -1561.69, 633.82, -1557.53, 632, -1582.75, 652.656, 709.547, 1165.78, 734.602, 1176.59, -675.227, 1147.52, 789.531, 1196.66, -681.727, 1151.85, -771.102, 1186.55, -1123.32, 316.523, -1112.14, 322.969, -1820.32, 660.523, -1809.14, 666.969, -105.32, 844.523, -94.1406, 850.969, -1687.45, 915, -1696.99, 677.891, -999.992, 333.891, 841.648, 316.523, 852.867, 322.969, -1030.19, 339.359, 1377.77, 1210.8, 1444.58, 1202.69, 1084.13, 1223.76, 1011.83, 1222.98, 976.047, 1215.5, 955.438, 1213.94, 828.102, 1203.75, 813.148, 1198.95, -1017.57, 1220.02, 965, 333.891, -1727.19, 683.359, -1683.99, 1070.75, -1501.47, 1189.66, -1477.83, 1191.95, -1462.91, 1196.75, -1682.87, 1091.98, -1679.32, 1106.13, -1678.35, 1127.81, 18, 861.891, -1581.43, 1158.78, -1556.4, 1169.59, -1335.56, 1206.94, -1314.94, 1208.5, -1279.17, 1215.98, -913.219, 1203.8, -846.398, 1195.69, -822.063, 1197.15, -1206.85, 1216.76, -1190.88, 1217.99, -789.359, 1188.75)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4, 5, 6, 7), PackedInt32Array(8, 9, 10, 11), PackedInt32Array(12, 13, 14, 15, 16, 17), PackedInt32Array(18, 15, 14, 19), PackedInt32Array(20, 21, 22, 19, 14, 23), PackedInt32Array(4, 24, 25, 26, 27, 8, 28), PackedInt32Array(29, 27, 30, 31), PackedInt32Array(32, 27, 29, 33, 17, 34), PackedInt32Array(3, 24, 4), PackedInt32Array(32, 8, 27), PackedInt32Array(30, 35, 36, 37, 38, 39), PackedInt32Array(40, 41, 2, 1), PackedInt32Array(42, 23, 14, 43), PackedInt32Array(44, 43, 14, 45), PackedInt32Array(10, 9, 46, 14, 47, 48), PackedInt32Array(6, 5, 49, 50), PackedInt32Array(51, 45, 14, 46), PackedInt32Array(36, 52, 53, 54, 55, 56), PackedInt32Array(12, 57, 58, 59, 60, 61), PackedInt32Array(48, 47, 62, 63, 64), PackedInt32Array(58, 57, 65, 66), PackedInt32Array(67, 68, 28, 8), PackedInt32Array(69, 70, 13, 12), PackedInt32Array(34, 71, 32), PackedInt32Array(72, 73, 34, 17, 74), PackedInt32Array(75, 74, 17), PackedInt32Array(76, 75, 17, 16), PackedInt32Array(77, 78, 50), PackedInt32Array(79, 80, 81), PackedInt32Array(82, 83, 84), PackedInt32Array(85, 86, 87), PackedInt32Array(62, 88, 89), PackedInt32Array(90, 77, 49, 91, 92, 93, 94), PackedInt32Array(66, 65, 95, 96, 97), PackedInt32Array(98, 99, 100, 10), PackedInt32Array(101, 102, 103, 104), PackedInt32Array(105, 106, 107, 108), PackedInt32Array(109, 110, 111, 93), PackedInt32Array(112, 7, 6), PackedInt32Array(113, 114, 115, 116, 117, 118, 119), PackedInt32Array(84, 120, 98), PackedInt32Array(92, 121, 109, 93), PackedInt32Array(87, 122, 101), PackedInt32Array(89, 123, 105), PackedInt32Array(124, 125, 126, 127, 128, 112, 6), PackedInt32Array(129, 31, 30), PackedInt32Array(124, 130, 131, 132, 125), PackedInt32Array(36, 56, 133, 134), PackedInt32Array(135, 113, 119, 124, 6, 136), PackedInt32Array(137, 138, 135, 136, 82, 10, 139), PackedInt32Array(36, 134, 37), PackedInt32Array(30, 39, 140), PackedInt32Array(30, 140, 141, 142, 79), PackedInt32Array(30, 79, 81), PackedInt32Array(143, 30, 81, 144, 145), PackedInt32Array(146, 129, 30, 147), PackedInt32Array(148, 147, 30), PackedInt32Array(149, 150, 69, 12, 151), PackedInt32Array(77, 50, 49), PackedInt32Array(152, 153, 67, 8, 154), PackedInt32Array(155, 154, 8), PackedInt32Array(156, 151, 12), PackedInt32Array(157, 148, 30, 158), PackedInt32Array(93, 111, 159, 160, 161, 162, 163), PackedInt32Array(100, 164, 165, 166, 167, 10), PackedInt32Array(103, 168, 169, 170, 171, 144, 104), PackedInt32Array(107, 172, 173, 174, 175, 108), PackedInt32Array(176, 177, 63, 62, 178), PackedInt32Array(105, 108, 178, 62, 89), PackedInt32Array(97, 96, 179, 180), PackedInt32Array(181, 97, 180, 182, 183), PackedInt32Array(184, 183, 182), PackedInt32Array(167, 185, 186, 10), PackedInt32Array(171, 187, 188, 144), PackedInt32Array(108, 175, 189, 190, 60, 191, 192), PackedInt32Array(193, 163, 162, 194, 195, 10, 196), PackedInt32Array(82, 84, 98, 10), PackedInt32Array(85, 87, 101, 104), PackedInt32Array(197, 198, 158, 30, 143), PackedInt32Array(199, 145, 144, 200), PackedInt32Array(201, 200, 144, 202), PackedInt32Array(203, 202, 144), PackedInt32Array(182, 204, 203, 144, 205), PackedInt32Array(206, 155, 8, 11), PackedInt32Array(195, 11, 10), PackedInt32Array(186, 196, 10), PackedInt32Array(104, 137, 139, 85), PackedInt32Array(144, 188, 207), PackedInt32Array(144, 207, 192, 191, 208), PackedInt32Array(209, 210, 211, 144), PackedInt32Array(212, 213, 214, 144), PackedInt32Array(215, 156, 12, 61), PackedInt32Array(190, 61, 60), PackedInt32Array(144, 208, 212), PackedInt32Array(144, 214, 216, 217), PackedInt32Array(144, 217, 209), PackedInt32Array(144, 211, 218), PackedInt32Array(144, 218, 219, 220), PackedInt32Array(221, 222, 223, 205), PackedInt32Array(144, 220, 224, 225), PackedInt32Array(223, 226, 184, 182), PackedInt32Array(144, 225, 205), PackedInt32Array(223, 182, 205)])
outlines = Array[PackedVector2Array]([PackedVector2Array(2242, 1548, -2217, 1550, -2141, -115, -1816, -260, -1359, -252, -1356, -355, -1575, -509, -1653, -700, -1389, -917, -1008, -1076, -605, -1061, -469, -1025, -320, -1033, -361, -1187, -343, -1381, -164, -1469, 32, -1502, 279, -1411, 388, -1353, 385, -1182, 355, -1015, 680, -1051, 841, -1109, 1202, -985, 1491, -794, 1668, -660, 1360, -355, 1353, -272, 1585, -244, 1945, -224, 2215, -75, 2210, 582, 2222, 1442)])
agent_radius = 20.0

[node name="BossRoom" type="Node2D" node_paths=PackedStringArray("camera", "default_spawn_location", "player_hud", "scene_transition")]
script = ExtResource("1_abn8t")
camera = NodePath("Camera")
default_spawn_location = NodePath("Doors/Marker2D")
player_hud = NodePath("CanvasLayer/PlayerHud")
scene_path = "res://scenes/levels/boss_room.tscn"
scene_transition = NodePath("CanvasLayer2/SceneTransition")

[node name="Background" type="Sprite2D" parent="."]
position = Vector2(2700, 1920)
texture = ExtResource("1_cv0fk")

[node name="Fog" type="Sprite2D" parent="."]
position = Vector2(2700, 1920)
texture = ExtResource("2_0suvt")

[node name="LightHarvester" parent="Fog" instance=ExtResource("4_3feig")]
position = Vector2(-85, 1422)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PlayerHud" parent="CanvasLayer" instance=ExtResource("1_jaeu5")]

[node name="CanvasLayer2" type="CanvasLayer" parent="."]

[node name="SceneTransition" parent="CanvasLayer2" instance=ExtResource("2_ckvva")]
visible = false
offset_right = 1920.0
offset_bottom = 1080.0

[node name="AmbientLight" parent="." instance=ExtResource("3_fgr18")]

[node name="Camera" parent="." instance=ExtResource("4_apome")]
position = Vector2(4191, 3136)
zoom = Vector2(0.8, 0.8)
limit_left = 0
limit_top = 0
limit_right = 5350
limit_bottom = 3825
limit_smoothed = true

[node name="Boundaries" type="StaticBody2D" parent="."]

[node name="Walls" type="Sprite2D" parent="Boundaries"]
position = Vector2(2700, 1920)
texture = ExtResource("5_6fo6o")

[node name="Floor" type="Sprite2D" parent="Boundaries"]
position = Vector2(2700, 3664)
texture = ExtResource("6_37c4f")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Boundaries"]
polygon = PackedVector2Array(4951, 3176, 4961, 1825, 4929, 1778, 4823, 1712, 4727, 1657, 4506, 1613, 4365, 1608, 4223, 1602, 4104, 1625, 4282, 1530, 4389, 1432, 4448, 1338, 4440, 1192, 4250, 1055, 4076, 930, 3902, 838, 3755, 753, 3596, 728, 3455, 749, 3221, 811, 3121, 847, 3187, 704, 3158, 511, 3113, 464, 2671, 318, 2262, 496, 2232, 583, 2216, 662, 2232, 738, 2286, 832, 2282, 853, 2165, 805, 1954, 766, 1712, 745, 1573, 788, 1242, 975, 1063, 1123, 976, 1200, 961, 1319, 1037, 1417, 1188, 1570, 1293, 1623, 1172, 1615, 961, 1610, 746, 1640, 584, 1700, 449, 1804, 446, 1881, 465, 2195, 482, 2389, 470, 2633, 463, 2922, 465, 3309, 466, 3480, -4, 3482, -2, 2, 5404, -3, 5400, 3176)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(2700.5, 3671)
shape = SubResource("RectangleShape2D_xieh3")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(5333, 3328.5)
rotation = 1.5708
shape = SubResource("RectangleShape2D_ol7g7")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(5175.5, 3329)
rotation = 4.71239
shape = SubResource("RectangleShape2D_lt10v")
one_way_collision = true

[node name="Doors" type="Node" parent="."]

[node name="Marker2D" type="Marker2D" parent="Doors"]
position = Vector2(5137, 3372)

[node name="Enemies" type="Node" parent="."]

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
position = Vector2(2700, 1920)
navigation_polygon = SubResource("NavigationPolygon_d8dyn")

[node name="Lightbug" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(539, 454)

[node name="Lightbug2" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(1922, 750)

[node name="Lightbug3" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(-1714, 964)

[node name="Lightbug4" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(-641, 590)

[node name="Lightbug5" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(-1602, -143)

[node name="Lightbug6" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(948, -368)

[node name="Lightbug7" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(-706, -622)

[node name="Lightbug9" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(0, -72)

[node name="Lightbug8" parent="NavigationRegion2D" instance=ExtResource("11_b5qjx")]
position = Vector2(1, -1203)

[node name="Platforms" type="Node" parent="NavigationRegion2D"]

[node name="StonePlatform" parent="NavigationRegion2D/Platforms" instance=ExtResource("13_75py6")]
position = Vector2(1546, 2983)

[node name="StonePlatform2" parent="NavigationRegion2D/Platforms" instance=ExtResource("13_75py6")]
position = Vector2(3837, 2990)

[node name="SmallPlatform" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(723, 3276)

[node name="SmallPlatform2" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(2701, 2694)

[node name="SmallPlatform3" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(986, 2510)

[node name="SmallPlatform5" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(986, 2510)

[node name="SmallPlatform6" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(4360, 2510)

[node name="SmallPlatform7" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(3648, 2166)

[node name="SmallPlatform4" parent="NavigationRegion2D/Platforms" instance=ExtResource("14_4tvg5")]
position = Vector2(1683, 2166)

[node name="Lantern" parent="." instance=ExtResource("11_m1y6d")]
position = Vector2(1546, 3414)

[node name="Lantern2" parent="." instance=ExtResource("11_m1y6d")]
position = Vector2(3840, 3414)

[node name="Lantern3" parent="." instance=ExtResource("11_m1y6d")]
position = Vector2(2700, 2562)
